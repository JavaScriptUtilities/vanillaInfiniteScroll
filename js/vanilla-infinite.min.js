function vanilla_infinite_scroll(a,b){"use strict";function c(){o.set_events()}function d(){if(p)return z=o.el.scrollHeight-s,!1;var a=o.el.getBoundingClientRect();z=m()+a.top+a.height-s}function e(){if(t)return o.unset_events(),!1;if(!x)return!1;if(!i(o.el))return!1;if(y=p?l(o.el):n(),y<z)return!1;h();var a={page:o.nextPage};q&&k(q,f,a)}function f(a){a||o.unset_events(),"json"==r&&(a=JSON.parse(a)),v(o,a),u(o,a),w(o,a),setTimeout(function(){j()},50),setTimeout(function(){g(),e()},100)}function g(){x=!0,o.el.setAttribute("aria-busy","false"),o.el.setAttribute("data-loading","false")}function h(){x=!1,o.el.setAttribute("aria-busy","true"),o.el.setAttribute("data-loading","true")}function i(a){return null!==a.offsetParent}function j(){var a=window.document.createEvent("UIEvents");a.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(a)}function k(a,b,c){return window.jQuery?void jQuery.ajax({url:a,success:b,data:c}):void new jsuAJAX({url:a,callback:b,data:c})}function l(a){return a.scrollTop+a.offsetHeight}function m(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function n(){return m()+Math.max(document.documentElement.clientHeight,window.innerHeight||0)}var o=this;if(b=b||{},a){o.el=a,o.currentPage=parseInt(o.el.getAttribute("data-currentpage")||b.currentPage||1,10),o.nextPage=o.currentPage+1;var p=b.overflowItem||"auto"==a.style.overflow,q=o.el.getAttribute("data-callbackurl")||b.callbackUrl||!1,r=o.el.getAttribute("data-returntype")||b.returnType||"html",s=parseInt(o.el.getAttribute("data-offsetscroll")||b.offsetScroll||500,10),t=!1,u=b.callbackResponse||function(a,b){a.el.setAttribute("data-currentpage",a.nextPage),a.el.insertAdjacentHTML("beforeend",b),a.nextPage++},v=b.callbackBeforeResponse||function(a,b){},w=b.callbackAfterResponse||function(a,b){},x=!0,y=0,z=0,A=window;p&&(A=a),o.set_events=function(){d(),e(),window.addEventListener("resize",d,!1),window.addEventListener("scroll",d,!1),A.addEventListener("scroll",e,!1)},o.unset_events=function(){window.removeEventListener("resize",d,!1),window.removeEventListener("scroll",d,!1),A.removeEventListener("scroll",e,!1)},c()}}