function vanilla_infinite_scroll(a,b){"use strict";function c(){o.set_events()}function d(){if(p)return z=i(o.el),A=o.el.offsetHeight,C=o.el.scrollHeight-t,!1;var a=o.el.getBoundingClientRect();C=m()+a.top+a.height-t}function e(){if(u)return o.unset_events(),!1;if(!y||!z)return!1;if(B=p?l():n(),B<C)return!1;h();var a={page:o.nextPage};!function(){if(r){"object"!=typeof r&&(r=JSON.parse(r));for(var b in r)a[b]=r[b]}}(),q&&k(q,f,a)}function f(a){a||o.unset_events(),"json"==s&&(a=JSON.parse(a)),v(o,a),x(o,a),w(o,a),setTimeout(function(){j()},50),setTimeout(function(){g(),e()},100)}function g(){y=!0,o.el.setAttribute("aria-busy","false"),o.el.setAttribute("data-loading","false")}function h(){y=!1,o.el.setAttribute("aria-busy","true"),o.el.setAttribute("data-loading","true")}function i(a){return null!==a.offsetParent}function j(){var a=window.document.createEvent("UIEvents");a.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(a)}function k(a,b,c){return window.jQuery?void jQuery.ajax({url:a,success:b,data:c}):void new jsuAJAX({url:a,callback:b,data:c})}function l(){return o.el.scrollTop+A}function m(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function n(){return m()+Math.max(document.documentElement.clientHeight,window.innerHeight||0)}var o=this;if(b=b||{},a){o.el=a;var p=b.overflowItem||"auto"==a.style.overflow,q=o.el.getAttribute("data-callbackurl")||b.callbackUrl||!1,r=o.el.getAttribute("data-moredatas")||b.moreDatas||{},s=o.el.getAttribute("data-returntype")||b.returnType||"html",t=parseInt(o.el.getAttribute("data-offsetscroll")||b.offsetScroll||500,10),u=!1,v=b.callbackBeforeResponse||function(a,b){},w=b.callbackAfterResponse||function(a,b){},x=b.callbackResponse||function(a,b){a.el.setAttribute("data-currentpage",a.nextPage),a.el.insertAdjacentHTML("beforeend",b),a.nextPage=a.incrementationMethod(a.nextPage)};o.incrementationMethod=b.incrementationMethod||function(a){return a+1},o.currentPage=parseInt(o.el.getAttribute("data-currentpage")||b.currentPage||1,10),o.nextPage=parseInt(o.el.getAttribute("data-currentpage")||b.currentPage||o.incrementationMethod(o.currentPage),10);var y=!0,z=!0,A=0,B=0,C=0,D=window;p&&(D=a),o.set_events=function(){d(),e(),window.addEventListener("resize",d,!1),window.addEventListener("scroll",d,!1),D.addEventListener("scroll",e,!1)},o.unset_events=function(){window.removeEventListener("resize",d,!1),window.removeEventListener("scroll",d,!1),D.removeEventListener("scroll",e,!1)},c()}}