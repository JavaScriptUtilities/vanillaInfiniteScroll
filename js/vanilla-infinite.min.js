function vanilla_infinite_scroll(a,b){"use strict";function c(){n.set_events()}function d(){if(o)return y=n.el.scrollHeight-r,!1;var a=n.el.getBoundingClientRect();y=l()+a.top+a.height-r}function e(){if(s)return n.unset_events(),!1;if(!w)return!1;if(x=o?k(n.el):m(),x<y)return!1;h();var a={page:n.currentPage};p&&j(p,f,a)}function f(a){a||n.unset_events(),"json"==q&&(a=JSON.parse(a)),u(n,a),t(n,a),v(n,a),setTimeout(function(){i()},50),setTimeout(function(){g(),e()},100)}function g(){w=!0,n.el.setAttribute("aria-busy","false"),n.el.setAttribute("data-loading","false")}function h(){w=!1,n.el.setAttribute("aria-busy","true"),n.el.setAttribute("data-loading","true")}function i(){var a=window.document.createEvent("UIEvents");a.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(a)}function j(a,b,c){return window.jQuery?void jQuery.ajax({url:a,success:b,data:c}):void new jsuAJAX({url:a,callback:b,data:c})}function k(a){return a.scrollTop+a.offsetHeight}function l(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function m(){return l()+Math.max(document.documentElement.clientHeight,window.innerHeight||0)}var n=this;if(b=b||{},a){n.el=a,n.currentPage=parseInt(n.el.getAttribute("data-currentpage")||b.currentPage||1,10);var o=b.overflowItem||"auto"==a.style.overflow,p=n.el.getAttribute("data-callbackurl")||b.callbackUrl||!1,q=n.el.getAttribute("data-returntype")||b.returnType||"html",r=parseInt(n.el.getAttribute("data-offsetscroll")||b.offsetScroll||200,10),s=!1,t=b.callbackResponse||function(a,b){a.el.setAttribute("data-currentpage",a.currentPage),a.el.insertAdjacentHTML("beforeend",b),a.currentPage++},u=b.callbackBeforeResponse||function(a,b){},v=b.callbackAfterResponse||function(a,b){},w=!0,x=0,y=0,z=window;o&&(z=a),n.set_events=function(){d(),e(),window.addEventListener("resize",d,!1),window.addEventListener("scroll",d,!1),z.addEventListener("scroll",e,!1)},n.unset_events=function(){window.removeEventListener("resize",d,!1),window.removeEventListener("scroll",d,!1),z.removeEventListener("scroll",e,!1)},c()}}