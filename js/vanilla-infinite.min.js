function vanilla_infinite_scroll(a,b){"use strict";function c(){n.set_events()}function d(){if(o)return y=i(n.el),z=n.el.offsetHeight,B=n.el.scrollHeight-s,!1;var a=n.el.getBoundingClientRect();B=l()+a.top+a.height-s}function e(){if(t)return n.unset_events(),!1;if(!x||!y)return!1;if(A=o?k():m(),A<B)return!1;h();var a={page:n.nextPage};!function(){if(q){"object"!=typeof q&&(q=JSON.parse(q));for(var b in q)a[b]=q[b]}}(),p&&j(p,f,a)}function f(a){a||n.unset_events(),"json"==r&&(a=JSON.parse(a)),u(n,a),w(n,a),v(n,a),setTimeout(function(){d()},50),setTimeout(function(){d(),g(),e()},100)}function g(){x=!0,n.el.setAttribute("aria-busy","false"),n.el.setAttribute("data-loading","false")}function h(){x=!1,n.el.setAttribute("aria-busy","true"),n.el.setAttribute("data-loading","true")}function i(a){return null!==a.offsetParent}function j(a,b,c){return window.jQuery?void jQuery.ajax({url:a,success:b,data:c}):void new jsuAJAX({url:a,callback:b,data:c})}function k(){return n.el.scrollTop+z}function l(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function m(){return l()+Math.max(document.documentElement.clientHeight,window.innerHeight||0)}var n=this;if(b=b||{},a){n.el=a;var o=b.overflowItem||"auto"==a.style.overflow,p=n.el.getAttribute("data-callbackurl")||b.callbackUrl||!1,q=n.el.getAttribute("data-moredatas")||b.moreDatas||{},r=n.el.getAttribute("data-returntype")||b.returnType||"html",s=parseInt(n.el.getAttribute("data-offsetscroll")||b.offsetScroll||500,10),t=!1,u=b.callbackBeforeResponse||function(a,b){},v=b.callbackAfterResponse||function(a,b){},w=b.callbackResponse||function(a,b){a.el.setAttribute("data-currentpage",a.nextPage),a.el.insertAdjacentHTML("beforeend",b),a.nextPage=a.incrementationMethod(a.nextPage)};n.incrementationMethod=b.incrementationMethod||function(a){return a+1},n.currentPage=parseInt(n.el.getAttribute("data-currentpage")||b.currentPage||1,10),n.nextPage=parseInt(n.el.getAttribute("data-currentpage")||b.currentPage||n.incrementationMethod(n.currentPage),10);var x=!0,y=!0,z=0,A=0,B=0,C=window;o&&(C=a),n.set_events=function(){d(),e(),window.addEventListener("resize",d,!1),window.addEventListener("scroll",d,!1),C.addEventListener("scroll",e,!1)},n.unset_events=function(){window.removeEventListener("resize",d,!1),window.removeEventListener("scroll",d,!1),C.removeEventListener("scroll",e,!1)},c()}}